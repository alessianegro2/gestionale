exports.id=644,exports.ids=[644],exports.modules={15793:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,86346,23)),Promise.resolve().then(s.t.bind(s,27924,23)),Promise.resolve().then(s.t.bind(s,35656,23)),Promise.resolve().then(s.t.bind(s,40099,23)),Promise.resolve().then(s.t.bind(s,38243,23)),Promise.resolve().then(s.t.bind(s,28827,23)),Promise.resolve().then(s.t.bind(s,62763,23)),Promise.resolve().then(s.t.bind(s,97173,23))},16189:(e,t,s)=>{"use strict";var i=s(65773);s.o(i,"useRouter")&&s.d(t,{useRouter:function(){return i.useRouter}})},18264:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var i=s(60687),l=s(43210),a=s(41862);let r=e=>{if(!e)return"";let[t,s,i]=e.split("/");return`${i}-${s}-${t}`},n=({onClose:e,defaultData:t})=>{let[s,n]=(0,l.useState)({nome:"",data_i:"",data_f:"",costo_settimana:0,n_settimane:0}),[o,d]=(0,l.useState)(null),[c,m]=(0,l.useState)(!1),[x,u]=(0,l.useState)(!1);(0,l.useEffect)(()=>{t&&n({nome:t.nome||"",data_i:r(t.data_i),data_f:r(t.data_f),costo_settimana:t.costo_settimana||0,n_settimane:t.n_settimane||0})},[t]);let h=e=>{let{name:t,value:s}=e.target;n(e=>({...e,[t]:s}))},f=async i=>{i.preventDefault(),d(null),m(!1),u(!0);try{let i=t?"/api/updateAttivita":"/api/insertAttivita",l=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),a=await l.json();u(!1),l.ok?(d(a.message||"Attivit\xe0 salvata con successo!"),m(!1),setTimeout(()=>{e()},1e3)):(d(a.message||"Errore nel salvataggio."),m(!0))}catch(e){u(!1),d("Errore di rete o del server."+e),m(!0)}};return(0,i.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[[{label:"Nome",name:"nome",type:"text"},{label:"Data Inizio",name:"data_i",type:"date"},{label:"Data Fine",name:"data_f",type:"date"},{label:"Costo a Settimana (€)",name:"costo_settimana",type:"number"},{label:"Numero Settimane",name:"n_settimane",type:"number"}].map(e=>(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium mb-1",htmlFor:e.name,children:e.label}),(0,i.jsx)("input",{type:e.type,name:e.name,id:e.name,value:s[e.name]??"",onChange:h,className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-[#f8ecad]",required:!0,readOnly:"attivita"===e.name&&!!t})]},e.name)),(0,i.jsx)("div",{className:"text-center mt-2 min-h-[20px]",children:x?(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsx)(a.A,{className:"animate-spin h-5 w-5"})}):o?(0,i.jsx)("div",{className:`text-sm font-medium ${c?"text-red-600":"text-green-600"}`,children:o}):null}),(0,i.jsxs)("div",{className:"flex justify-between mt-6",children:[(0,i.jsx)("button",{type:"button",onClick:e,className:"px-4 py-2 bg-gray-300 hover:bg-gray-400 rounded-xl text-sm",children:"Annulla"}),(0,i.jsx)("button",{type:"submit",disabled:x,className:"px-4 py-2 bg-[#fdeb90] hover:bg-[#fdea87] text-black font-semibold rounded-xl text-sm",children:"Salva"})]})]})};var o=s(16189);let d=()=>{let e=(0,o.useRouter)(),[t,s]=(0,l.useState)([]),[r,d]=(0,l.useState)(!1),[c,m]=(0,l.useState)(null),[x,u]=(0,l.useState)(null),[h,f]=(0,l.useState)(!1),[b,v]=(0,l.useState)(null),p=async()=>{try{let e=await fetch("/api/getAttivita"),t=await e.json();s(t)}catch(e){console.error("Errore nel recupero delle attivit\xe0",e)}};(0,l.useEffect)(()=>{p()},[]);let g=async()=>{if(x){f(!0),v(null);try{let e=await fetch("/api/deleteAttivita",{method:"POST",body:JSON.stringify({id:x._id})}),t=await e.json();e.ok?(v("Attivit\xe0 eliminata con successo."),setTimeout(()=>{u(null),p()},1e3)):v(t.message||"Errore durante l'eliminazione.")}catch(e){v("Errore imprevisto."),console.error("Errore:",e)}finally{f(!1)}}};return(0,i.jsxs)("div",{className:"min-h-screen py-10 px-4 flex flex-col items-center relative",children:[(0,i.jsx)("h1",{className:"text-3xl font-semibold text-center mb-8 w-full",children:"Attivit\xe0"}),(0,i.jsx)("button",{onClick:()=>{m(null),d(!0)},className:"absolute top-6 right-6 bg-[#fdeb90] hover:bg-[#fdea87] text-black font-bold rounded-full w-12 h-12 text-2xl flex items-center justify-center shadow-md transition",title:"Aggiungi attivit\xe0",children:"+"}),r?(0,i.jsxs)("div",{className:"w-full max-w-md mt-10 bg-white p-8 shadow-xl rounded-2xl",children:[(0,i.jsx)("h3",{className:"text-xl font-semibold mb-4 text-center",children:c?"Modifica Attivit\xe0":"Nuova Attivit\xe0"}),(0,i.jsx)(n,{onClose:()=>{d(!1),p()},defaultData:c||void 0})]}):(0,i.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8 w-full max-w-6xl",children:t.map(t=>(0,i.jsxs)("div",{className:"bg-white shadow-xl rounded-2xl p-6 relative",children:[(0,i.jsx)("h2",{className:"text-xl font-bold mb-1",children:t.nome}),(0,i.jsxs)("p",{className:"text-gray-700",children:["Dal ",(0,i.jsx)("strong",{children:t.data_i})," al ",(0,i.jsx)("strong",{children:t.data_f})]}),(0,i.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:[t.n_settimane," settimane - ",t.costo_settimana,"€/settimana"]}),(0,i.jsxs)("div",{className:"grid grid-cols-2",children:[(0,i.jsx)("div",{className:"flex justify-start gap-2 mt-4",children:(0,i.jsx)("button",{onClick:()=>{e.push("/iscritti")},className:"px-3 py-1 bg-[#465c9783] hover:bg-[#465c97c9] rounded-xl text-sm font-semibold text-white",children:"Iscritti"})}),(0,i.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,i.jsx)("button",{onClick:()=>{m(t),d(!0)},className:"px-3 py-1 bg-[#fdeb90a6] hover:bg-[#fdea87] rounded-xl text-sm font-semibold",children:"Modifica"}),(0,i.jsx)("button",{onClick:()=>u(t),className:"px-3 py-1 bg-red-400 hover:bg-red-500 rounded-xl text-sm font-semibold text-white",children:"Elimina"})]})]})]},t._id))}),x&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("style",{children:"body { overflow: hidden; }"}),(0,i.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40 pointer-events-auto"}),(0,i.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg w-full max-w-sm",children:[(0,i.jsx)("h2",{className:"text-lg font-bold mb-4 text-center",children:"Conferma Eliminazione"}),(0,i.jsxs)("p",{className:"text-center text-gray-700 mb-4",children:["Sei sicuro di voler eliminare ",(0,i.jsx)("strong",{children:x.nome}),"?"]}),h?(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsx)(a.A,{className:"animate-spin h-5 w-5"})}):b?(0,i.jsx)("p",{className:"text-center text-sm text-gray-700 mb-4",children:b}):null,(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("button",{disabled:h,onClick:()=>{u(null),v(null),document.body.style.overflow="auto"},className:"px-4 py-2 rounded-xl bg-gray-300 hover:bg-gray-400 text-sm",children:"Annulla"}),(0,i.jsx)("button",{disabled:h,onClick:()=>{g(),document.body.style.overflow="auto"},className:"px-4 py-2 rounded-xl bg-red-500 hover:bg-red-600 text-white text-sm font-semibold",children:"Elimina"})]})]})})]})]})}},19842:()=>{},27213:()=>{},37994:()=>{},38727:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var i=s(37413);s(27213);var l=s(4536),a=s.n(l),r=s(53384),n=s(18898),o=s(44152),d=s(48201),c=s(41382),m=s(34373),x=s(88971),u=s(32769),h=s(19321);let f=[{title:"Dashboard",items:[{icon:n.A,label:"Home",href:"/home"},{icon:o.A,label:"Iscritti",href:"/iscritti"},{icon:d.A,label:"Attivit\xe0",href:"/attivita"},{icon:c.A,label:"Collaboratori",href:"/collaboratori"},{icon:m.A,label:"Gruppi",href:"/gruppi"}]},{title:"Others",items:[{icon:x.A,label:"Profilo",href:"/profilo"},{icon:u.A,label:"Impostazioni",href:"/impostazioni"},{icon:h.A,label:"Logout",href:"/login"}]}],b=()=>(0,i.jsxs)("div",{className:"h-full w-full bg-[#465c97d8]  text-sm text-white px-2 pt-6",children:[(0,i.jsx)("div",{className:"flex justify-center mb-8 border-b-white border-b-2 pb-4",children:(0,i.jsx)(r.default,{src:"/sanca-logo.jpg",alt:"Logo",width:90,height:90,className:"rounded-full border-3 border-white"})}),f.map((e,t)=>(0,i.jsx)("div",{className:"mb-6",children:(0,i.jsx)("div",{className:"mt-3 space-y-2",children:e.items.map(e=>(0,i.jsxs)(a(),{href:e.href,className:"flex items-center md:justify-start justify-center gap-0 md:gap-4 px-4 py-3 rounded-md hover:bg-[#f8ecad63] transition",children:[(0,i.jsx)(e.icon,{className:"w-7 h-7 text-white"}),(0,i.jsx)("span",{className:"hidden lg:inline text-lg",children:e.label})]},e.label))})},t))]});var v=s(44999),p=s(79107);async function g(){let e=(await v.UL()).get("token")?.value;e||console.log("token non esistente");try{if(!e)throw Error("Token is undefined");let t=(0,p.n)(e);return console.log(t),(0,i.jsx)("div",{className:"flex items-center justify-between p-4 bg-gray-50 h-[60px] ",children:(0,i.jsxs)("div",{className:"flex items-center gap-6 justify-end w-full ",children:[(0,i.jsxs)("div",{className:"flex flex-col",children:[(0,i.jsx)("span",{className:"text-sm leading-3 font-medium",children:t.user}),(0,i.jsx)("span",{className:"text-[10px] text-gray-500 text-right",children:t.ruolo})]}),(0,i.jsx)(a(),{href:"/profilo",children:(0,i.jsx)(r.default,{alt:"",src:"/profile.png",width:25,height:25})})]})})}catch(e){return`<p>Token non valido. ${e}</p>`}}var j=s(39916);async function y({children:e}){let t=(await v.UL()).get("token")?.value;t||(console.log("token non esistente"),(0,j.redirect)("/login"));try{(0,p.n)(t)}catch(e){console.log(e),(0,j.redirect)("/login")}return(0,i.jsxs)("div",{className:"h-screen flex",children:[(0,i.jsx)("div",{className:"w-[13%] md:w-[6%] lg:w-[13%] xl:w-[13%]",children:(0,i.jsx)(b,{})}),(0,i.jsxs)("div",{className:"w-[87%] md:w-[94%] lg:w-[87%] xl:w-[87%]  bg-[#F7F8Fa] overflow-scroll",children:[(0,i.jsx)(g,{}),(0,i.jsx)("div",{className:"w-full p-4",children:e})]})]})}},40930:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,4536,23)),Promise.resolve().then(s.t.bind(s,49603,23))},41862:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});let i=(0,s(62688).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},50641:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,16444,23)),Promise.resolve().then(s.t.bind(s,16042,23)),Promise.resolve().then(s.t.bind(s,88170,23)),Promise.resolve().then(s.t.bind(s,49477,23)),Promise.resolve().then(s.t.bind(s,29345,23)),Promise.resolve().then(s.t.bind(s,12089,23)),Promise.resolve().then(s.t.bind(s,46577,23)),Promise.resolve().then(s.t.bind(s,31307,23))},59082:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,85814,23)),Promise.resolve().then(s.t.bind(s,46533,23))},62688:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var i=s(43210);let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),r=e=>{let t=a(e);return t.charAt(0).toUpperCase()+t.slice(1)},n=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim();var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,i.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:l,className:a="",children:r,iconNode:d,...c},m)=>(0,i.createElement)("svg",{ref:m,...o,width:t,height:t,stroke:e,strokeWidth:l?24*Number(s)/Number(t):s,className:n("lucide",a),...c},[...d.map(([e,t])=>(0,i.createElement)(e,t)),...Array.isArray(r)?r:[r]])),c=(e,t)=>{let s=(0,i.forwardRef)(({className:s,...a},o)=>(0,i.createElement)(d,{ref:o,iconNode:t,className:n(`lucide-${l(r(e))}`,`lucide-${e}`,s),...a}));return s.displayName=r(e),s}},79107:(e,t,s)=>{"use strict";s.d(t,{n:()=>n,z:()=>r});var i=s(43205),l=s.n(i);let a=process.env.JWT_SECRET;function r(e){return l().sign(e,a,{expiresIn:"1h"})}function n(e){return l().verify(e,a)}},94431:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var i=s(37413);function l({children:e}){return(0,i.jsx)("div",{className:"h-screen",children:e})}s(27213)}};