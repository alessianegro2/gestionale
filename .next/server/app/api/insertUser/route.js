(()=>{var e={};e.id=648,e.ids=[648],e.modules={3040:(e,r,t)=>{"use strict";t.d(r,{A:()=>o});var s=t(12518);let n=process.env.MONGODB_URI;if(!process.env.MONGODB_URI)throw Error("Please add your MongoDB URI to .env.local");let o=new s.MongoClient(n,{}).connect()},5486:e=>{"use strict";e.exports=require("bcrypt")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12518:e=>{"use strict";e.exports=require("mongodb")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},71066:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>v,routeModule:()=>d,serverHooks:()=>w,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>g});var s={};t.r(s),t.d(s,{POST:()=>c});var n=t(96559),o=t(48088),i=t(37719),a=t(5486),u=t.n(a),p=t(3040);async function c(e){try{let{username:r,password:t,admin:s,descrizione:n}=await e.json(),o=(await p.A).db("gestionale");if(await o.collection("users").findOne({username:r}))return new Response(JSON.stringify({message:"Username gi\xe0 esistente"}),{status:409});let i=await u().hash(t,10);return await o.collection("users").insertOne({username:r,password:i,admin:s,descrizione:n}),new Response(JSON.stringify({message:"Registrazione avvenuta con successo"}),{status:200})}catch(e){return new Response(JSON.stringify({message:e instanceof Error?e.message:"Unknown error occurred"}),{status:500})}}let d=new n.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/insertUser/route",pathname:"/api/insertUser",filename:"route",bundlePath:"app/api/insertUser/route"},resolvedPagePath:"C:\\Users\\negro\\Desktop\\gestionale\\src\\app\\api\\insertUser\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:l,workUnitAsyncStorage:g,serverHooks:w}=d;function v(){return(0,i.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:g})}},78335:()=>{},96487:()=>{},96559:(e,r,t)=>{"use strict";e.exports=t(44870)}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[719],()=>t(71066));module.exports=s})();