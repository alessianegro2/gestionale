(()=>{var e={};e.id=842,e.ids=[842],e.modules={3040:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var o=r(12518);let s=process.env.MONGODB_URI;if(!process.env.MONGODB_URI)throw Error("Please add your MongoDB URI to .env.local");let n=new o.MongoClient(s,{}).connect()},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12518:e=>{"use strict";e.exports=require("mongodb")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78207:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>m,routeModule:()=>p,serverHooks:()=>g,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>d});var o={};r.r(o),r.d(o,{POST:()=>u});var s=r(96559),n=r(48088),i=r(37719),a=r(3040);let c=e=>{let[t,r,o]=e.split("-");return`${o}/${r}/${t}`};async function u(e){try{let t=await e.json(),r=(await a.A).db("gestionale");if(null==t)return new Response(JSON.stringify({message:"Errore nell'inserimento dell'iscritto. "}),{status:400});let o={nome:t.nome,cognome:t.cognome,sesso:t.sesso,data_n:c(t.data_n),luogo_n:t.luogo_n,indirizzo:t.indirizzo,citta:t.citta,cap:t.cap,nazionalita:t.nazionalita,autorizzato_uscita:t.autorizzato_uscita,note:t.note,genitore:{nome:t.genitore.nome,cognome:t.genitore.cognome,telefono:t.genitore.telefono,email:t.genitore.email},disabilita:t.disabilita,privacy:t.privacy,trasporto:t.trasporto,pranzo:t.pranzo};return await r.collection("iscritti").insertOne(o),new Response(JSON.stringify({message:"Iscritto inserito con successo"}),{status:200})}catch(e){return new Response(JSON.stringify({message:e instanceof Error?e.message:"Unknown error occurred"}),{status:500})}}let p=new s.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/insertIscritto/route",pathname:"/api/insertIscritto",filename:"route",bundlePath:"app/api/insertIscritto/route"},resolvedPagePath:"C:\\Users\\negro\\Desktop\\gestionale\\src\\app\\api\\insertIscritto\\route.ts",nextConfigOutput:"",userland:o}),{workAsyncStorage:l,workUnitAsyncStorage:d,serverHooks:g}=p;function m(){return(0,i.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:d})}},78335:()=>{},96487:()=>{},96559:(e,t,r)=>{"use strict";e.exports=r(44870)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[719],()=>r(78207));module.exports=o})();