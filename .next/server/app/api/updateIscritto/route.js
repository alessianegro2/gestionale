(()=>{var e={};e.id=790,e.ids=[790],e.modules={3040:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var o=r(12518);let s=process.env.MONGODB_URI;if(!process.env.MONGODB_URI)throw Error("Please add your MongoDB URI to .env.local");let i=new o.MongoClient(s,{}).connect()},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12518:e=>{"use strict";e.exports=require("mongodb")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},58656:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>f,routeModule:()=>d,serverHooks:()=>m,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>g});var o={};r.r(o),r.d(o,{POST:()=>p});var s=r(96559),i=r(48088),n=r(37719),a=r(3040),u=r(12518);let c=e=>{let[t,r,o]=e.split("-");return`${o}/${r}/${t}`};async function p(e){try{let t=await e.json();if(!t._id)return new Response(JSON.stringify({message:"ID mancante. Impossibile aggiornare l'iscritto."}),{status:400});let r=(await a.A).db("gestionale"),o=await r.collection("iscritti").updateOne({_id:new u.ObjectId(t._id)},{$set:{nome:t.nome,cognome:t.cognome,sesso:t.sesso,data_n:c(t.data_n),luogo_n:t.luogo_n,indirizzo:t.indirizzo,citta:t.citta,cap:t.cap,nazionalita:t.nazionalita,autorizzato_uscita:t.autorizzato_uscita,note:t.note,genitore:{nome:t.genitore.nome,cognome:t.genitore.cognome,telefono:t.genitore.telefono,email:t.genitore.email},disabilita:t.disabilita,privacy:t.privacy,trasporto:t.trasporto,pranzo:t.pranzo}});if(0===o.modifiedCount)return new Response(JSON.stringify({message:"Nessuna modifica effettuata. Verifica che l'ID esista."}),{status:404});return new Response(JSON.stringify({message:"Iscritto aggiornato con successo"}),{status:200})}catch(e){return new Response(JSON.stringify({message:e instanceof Error?e.message:"Unknown error occurred"}),{status:500})}}let d=new s.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/updateIscritto/route",pathname:"/api/updateIscritto",filename:"route",bundlePath:"app/api/updateIscritto/route"},resolvedPagePath:"C:\\Users\\negro\\Desktop\\gestionale\\src\\app\\api\\updateIscritto\\route.ts",nextConfigOutput:"",userland:o}),{workAsyncStorage:l,workUnitAsyncStorage:g,serverHooks:m}=d;function f(){return(0,n.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:g})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},96487:()=>{},96559:(e,t,r)=>{"use strict";e.exports=r(44870)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[719],()=>r(58656));module.exports=o})();