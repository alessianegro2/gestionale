(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[870],{1469:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{default:function(){return c},getImageProps:function(){return o}});let r=a(8229),s=a(8883),l=a(3063),n=r._(a(1193));function o(e){let{props:t}=(0,s.getImgProps)(e,{defaultLoader:n.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,a]of Object.entries(t))void 0===a&&delete t[e];return{props:t}}let c=l.Image},4291:(e,t,a)=>{"use strict";a.d(t,{default:()=>d});var r=a(5155),s=a(2115),l=a(9946);let n=(0,l.A)("circle-user",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]),o=(0,l.A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),c=(0,l.A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var i=a(6766);let d=()=>{let[e,t]=(0,s.useState)(null),[a,l]=(0,s.useState)(!1),[d,m]=(0,s.useState)(""),[u,x]=(0,s.useState)(""),[f,p]=(0,s.useState)(null),[h,g]=(0,s.useState)(!1),[b,y]=(0,s.useState)(!1),w=async()=>{try{let e=await fetch("/api/getUtente"),a=await e.json();t(a)}catch(e){console.error("Errore nel caricamento utente:",e)}},j=async()=>{if(d!==u){p("Le password non coincidono.");return}let t=await fetch("/api/updatePassword",{method:"POST",body:JSON.stringify({id:null==e?void 0:e._id,password:d})}),a=await t.json();t.ok?(p("Password aggiornata con successo."),y(!0),setTimeout(()=>{l(!1),m(""),x(""),y(!1)},1e3)):p(a.message||"Errore nell'aggiornamento.")};return(0,s.useEffect)(()=>{w()},[]),(0,r.jsxs)("div",{className:"min-h-screen py-14 px-6 flex flex-col items-center bg-gray-50",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-center mb-10 w-full",children:"Profilo Utente"}),e?(0,r.jsxs)("div",{className:"w-full max-w-2xl bg-white p-10 shadow-2xl rounded-3xl flex flex-col items-center text-center text-lg",children:[e.immagine?(0,r.jsx)(i.default,{src:"data:image/png;base64,".concat(e.immagine),alt:"Immagine profilo",className:"w-32 h-32 rounded-full mb-6 object-cover shadow-md"}):(0,r.jsx)(n,{className:"w-32 h-32 text-gray-400 mb-6"}),(0,r.jsx)("p",{className:"text-2xl font-bold mb-2",children:e.username}),(0,r.jsx)("p",{className:"text-gray-700 mb-2 font-bold",children:e.admin?" Amministratore":" Utente standard"}),(0,r.jsxs)("p",{className:"text-gray-600 italic mb-6",children:["Note: ",e.descrizione]}),(0,r.jsxs)("div",{className:"w-full mb-4 text-left",children:[(0,r.jsx)("label",{className:"block text-gray-700 font-semibold mb-1",children:"Password:"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:h?"text":"password",value:e.password,readOnly:!0,className:"w-full px-4 py-3 border rounded-xl bg-gray-100 text-gray-600 text-sm"}),(0,r.jsx)("button",{onClick:()=>g(!h),className:"absolute right-4 top-3 text-gray-500 hover:text-black",children:h?(0,r.jsx)(o,{}):(0,r.jsx)(c,{})})]})]}),(0,r.jsx)("button",{onClick:()=>l(!0),className:"mt-4 px-5 py-3 text-lg rounded-xl bg-[#fdeb90] hover:bg-[#fdea87] font-bold",children:"Cambia Password"})]}):(0,r.jsx)("p",{className:"text-xl text-gray-600",children:"Caricamento profilo..."}),a&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40 pointer-events-auto"}),(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-lg w-full max-w-sm",children:[(0,r.jsx)("h2",{className:"text-lg mb-4 text-center",children:"Modifica Password"}),(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)("input",{type:"password",placeholder:"Nuova password",className:"w-full px-4 py-3 mb-3 border rounded-xl text-base",value:d,onChange:e=>m(e.target.value)}),(0,r.jsx)("input",{type:"password",placeholder:"Conferma password",className:"w-full px-4 py-3 mb-4 border rounded-xl text-base",value:u,onChange:e=>x(e.target.value)}),f&&(0,r.jsx)("p",{className:"text-center mt-3 text-gray-700",children:f}),b&&(0,r.jsx)("p",{className:"text-center mt-3 text-green-600 font-semibold",children:"Password cambiata con successo!"})]}),(0,r.jsxs)("div",{className:"flex justify-between mt-4",children:[(0,r.jsx)("button",{onClick:()=>l(!1),className:"px-4 py-2 rounded-xl bg-gray-300 hover:bg-gray-400 text-sm",children:"Annulla"}),(0,r.jsx)("button",{onClick:j,className:"px-4 py-2 rounded-xl bg-[#fdeb90] hover:bg-[#fdea87] text-black text-sm font-semibold",children:"Conferma"})]})]})})]})]})}},6766:(e,t,a)=>{"use strict";a.d(t,{default:()=>s.a});var r=a(1469),s=a.n(r)},6803:(e,t,a)=>{Promise.resolve().then(a.bind(a,4291))},9946:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var r=a(2115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),n=e=>{let t=l(e);return t.charAt(0).toUpperCase()+t.slice(1)},o=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:n,className:i="",children:d,iconNode:m,...u}=e;return(0,r.createElement)("svg",{ref:t,...c,width:s,height:s,stroke:a,strokeWidth:n?24*Number(l)/Number(s):l,className:o("lucide",i),...u},[...m.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(d)?d:[d]])}),d=(e,t)=>{let a=(0,r.forwardRef)((a,l)=>{let{className:c,...d}=a;return(0,r.createElement)(i,{ref:l,iconNode:t,className:o("lucide-".concat(s(n(e))),"lucide-".concat(e),c),...d})});return a.displayName=n(e),a}}},e=>{var t=t=>e(e.s=t);e.O(0,[63,441,684,358],()=>t(6803)),_N_E=e.O()}]);